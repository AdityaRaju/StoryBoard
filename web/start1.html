<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="ico/favicon.png">

    <title>iResearch</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/offcanvas.css" rel="stylesheet">

      <link href="css/custom.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.js"></script>
      <script src="js/respond.min.js"></script>

    <![endif]-->
  </head>

  <body>
    <div class="navbar navbar-fixed-top navbar-inverse" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#" style="color: white;font-weight: bold;font-size: 28px;">iResearch</a>
        </div>
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="custom.html">Custom</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#contact">Contact</a></li>

          </ul>
            <form role="search" class="navbar-form navbar-left">
                <div class="form-group">
                    <input type="text" placeholder="Search" class="form-control search-c popover-link" id="searchDivId">
                </div>
                <button type="submit" class="btn btn-success">Search</button>
            </form>

            <ul class="nav navbar-nav navbar-right" style="padding-top: 10px">


            <li class="dropdown" >

                <div class="btn-group">
                    <button class="btn btn-success" type="button">Presentation</button>
                    <button data-toggle="dropdown" class="btn btn-success dropdown-toggle" type="button"><span class="caret"></span></button>
                    <ul role="menu" class="dropdown-menu">
                        <li><a href="#" class="pres-create">Create</a></li>
                        <li><a href="#" class="pres-viewall">View All</a></li>

                        <li><a href="export.pdf" class="pres-export" target="_blank">Export</a></li>

                        <li class="divider"></li>
                        <li><a href="#">Edit</a></li>
                    </ul>
                </div>
            </li>
                <li style=" padding-left: 10px;">
                    <button type="" class="btn btn-warning">Bookmarklet</button>

                </li>
            </ul>

        </div><!-- /.nav-collapse -->
      </div><!-- /.container -->
    </div><!-- /.navbar -->

    <div class="container " >
        <div class="row row-offcanvas row-offcanvas-right padd-20px hide-me" id="commDivId">
            <div class="col-xs-12 col-sm-3">
                <div style="float: right;">
                    <p><span class="glyphicon glyphicon-user fnt-size-46"></span>  </p>
                    <p><span class="">Jim Walsh</span> <span style="width: 10px;">&nbsp;&nbsp;|&nbsp;&nbsp;</span><span class="">Sector Analyst</span></p>

                </div>
                </p>
            </div>
            <div class="col-xs-12 col-sm-6">
                <textarea class="form-control" rows="5" placeholder="Enter Comments" id="myCmt"></textarea>

            </div>
            <div class="col-xs-12 col-sm-3">
                <div class="bs-example">
                    <div class="btn-toolbar">
                        <div class="btn-group">
                            <button  type="button" class="btn btn-default add-update-slide" >
                                <span class="glyphicon glyphicon-check"></span> Add/Update Slide
                            </button>

                        </div><!-- /btn-group -->
                    </div><!-- /btn-toolbar -->
                    <div class="btn-group padd-top-10px">
                        <button  type="button" class="btn btn-info">
                            <span class="glyphicon glyphicon-step-backward"></span> Prev
                        </button>
                    </div>
                    <div class="btn-group padd-top-10px">
                        <button  type="button" class="btn btn-info">
                             Next <span class="glyphicon glyphicon-step-forward"></span>
                        </button>
                    </div>
                    <div class="btn-group padd-top-10px">
                        <button  type="button" class="btn btn-success ppt-save">
                            <span class="glyphicon glyphicon-link"></span> Share
                        </button>
                    </div>
                    <div class="btn-group padd-top-10px">
                        <button class="btn btn-primary " type="button">Save</button>
                        <button data-toggle="dropdown" class="btn btn-primary dropdown-toggle" type="button"><span class="caret"></span></button>
                        <ul role="menu" class="dropdown-menu">
                            <li><a href="#">
                                <span class="glyphicon glyphicon-save ppt-save"></span> Save
                            </a></li>
                            <li><a href="#">
                                <span class="glyphicon glyphicon-send ppt-save"></span> Email</a></li>
                            <li><a href="#">Something else here</a></li>
                            <li class="divider"></li>
                            <li><a href="#">Separated link</a></li>
                        </ul>
                    </div>

                </div>
            </div>
        </div>

        <div class="row row-offcanvas row-offcanvas-right">
            <div class="col-xs-12 col-sm-5">
                <!--<p class="pull-right">
                    <span class="input-group-addon">
        <input type="checkbox">
      </span>
                </p>-->
                <div class="jumbotron" id="cInfoDivId">

                </div>
             </div>
            <div class="col-xs-12 col-sm-7">

                <!--<div id="container" style="height: 500px; min-width: 500px"></div>-->
                <div class="jumbotron" id="chart1">

                </div>
            </div>

        </div>


        <div class="row row-offcanvas row-offcanvas-right">
            <div class="col-xs-12 col-sm-6" style="overflow: scroll;height: 400px;">
                <div class="bs-news" id="news-ft-div">
                    <div class="media">
                        <a href="#" class="pull-left">
                            <img src="http://ify.valuewalk.com/wp-content/uploads/2013/06/Market-News.jpg" style="width: 64px; height: 64px;">
                        </a>
                        <div class="media-body">
                            <h4 class="media-heading">Market News: Alcoa, Global Payments, Tesla Motors, Tenet</h4>
                            The stock markets in the United States went to the downside today after recording gains yesterday as investors started to weigh the effect of the ongoing government shutdown. Today’s stock trading was also negatively affected by the data released by ADP Research Institute indicating that the number of new employees hired by companies was fewer in September.
                        </div>
                    </div>
                    <div class="media">
                        <a href="#" class="pull-left">
                            <img src="http://ify.valuewalk.com/wp-content/uploads/2013/07/apple-stock1.jpg" style="width: 64px; height: 64px;">
                        </a>
                        <div class="media-body">
                            <h4 class="media-heading">Apple Inc. (AAPL) Market Cap Raised $8 Billion Per Icahn Tweet </h4>
                            Activist investor Carl Icahn certainly moves the markets with his tweets, adding billions to Apple Inc. (AAPL)’s value.
                            How much is a tweet worth to a company like Apple Inc. (NASDAQ:AAPL)? Undoubtedly that will be something Twitter will be working out as it approaches its initial public offering. But if you’re Carl Icahn, you can add a cool $8 billion to Apple Inc. (NASDAQ:AAPL)’s market capitalization.
                        </div>
                    </div>
                    <div class="media">
                        <a href="#" class="pull-left">
                            <img src="http://ify.valuewalk.com/wp-content/uploads/2013/10/Bank-CEO.jpg" style="width: 64px; height: 64px;">
                        </a>
                        <div class="media-body">
                            <h4 class="media-heading">Bank CEOs Urge Obama To Avoid U.S. Default</h4>
                            Major U.S. bank CEOs met with President Barack Obama today, asking him to find a way to end the current political standoff before the nation’s debt ceiling is reached later this month, reports Jared Favole of The Wall Street Journal..
                        </div>
                    </div>



                </div>
            </div>
            <div class="col-xs-12 col-sm-6">
                <p class="pull-right visible-xs">
                    <button type="button" class="btn btn-primary btn-xs" data-toggle="offcanvas">Toggle nav</button>
                </p>
                <div class="jumbotron" id="chart2">

                </div>

            </div>

        </div>


      </div><!--/row-->

      <hr>

      <footer>
        <p>&copy; Company 2013</p>
      </footer>
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Presentation on Current Market Trends</h4>
                </div>
                <div class="modal-body">
                    Welcome to iResearch, share by Jim Walsh.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div>
    <div id="popover-content-cinfo" class="hide-me">
        <ul><li><h3 class="cres-title"><a href="#" class="search-res" cid="BBG000BLNNH6" symbol="ibm">International Business Machines Corp</a></h3></li><li><h3 class="cres-title"><a href="#" class="search-res" cid="BBG000B9XRY4" symbol="aapl">Apple Inc</a></h3></li><li><h3 class="cres-title"><a href="#" class="search-res" cid="BBG000C0G1D1" symbol="intc">Intel Corp</a></h3></li><li><h3 class="cres-title"><a href="#" class="search-res" cid="BBG000NDYB67" symbol="gm">General Motors Co</a></h3></li></ul>
    </div>

    </div><!--/.container-->



    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/jquery.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/offcanvas.js"></script>
  <script type="text/javascript">
      $(function() {
          //$.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename=goog-c.json&callback=?',

          //$.get('/1/chart/for/aapl', function(data) {
          $.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename=goog-c.json&callback=?', function(data) {
              // Create the chart
              console.log(data) ;
              $('#chart1').highcharts('StockChart', {

                  height:400,
                  rangeSelector : {
                      selected : 1
                  },

                  title : {
                      text : 'Stock Price'
                  },

                  series : [{
                      name : '--',
                      data : data,
                      tooltip: {
                          valueDecimals: 2
                      }
                  }]
              });
          });

      });

      $.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename=usdeur.json&callback=?', function(data) {

          // Create the chart
          $('#chart2').highcharts('StockChart', {


              rangeSelector : {
                  selected : 1
              },

              title : {
                  text : 'USD to EUR exchange rate'
              },

              tooltip: {
                  style: {
                      width: '200px'
                  },
                  valueDecimals: 4
              },

              yAxis : {
                  title : {
                      text : 'Exchange rate'
                  }
              },

              series : [{
                  name : 'USD to EUR',
                  data : data,
                  id : 'dataseries'
              },
                  // the event marker flags
                  {
                      type : 'flags',
                      data : [{
                          x : Date.UTC(2011, 3, 25),
                          title : 'H',
                          text : 'Euro Contained by Channel Resistance'
                      }, {
                          x : Date.UTC(2011, 3, 28),
                          title : 'G',
                          text : 'EURUSD: Bulls Clear Path to 1.50 Figure'
                      }, {
                          x : Date.UTC(2011, 4, 4),
                          title : 'F',
                          text : 'EURUSD: Rate Decision to End Standstill'
                      }, {
                          x : Date.UTC(2011, 4, 5),
                          title : 'E',
                          text : 'EURUSD: Enter Short on Channel Break'
                      }, {
                          x : Date.UTC(2011, 4, 6),
                          title : 'D',
                          text : 'Forex: U.S. Non-Farm Payrolls Expand 244K, U.S. Dollar Rally Cut Short By Risk Appetite'
                      }, {
                          x : Date.UTC(2011, 4, 6),
                          title : 'C',
                          text : 'US Dollar: Is This the Long-Awaited Recovery or a Temporary Bounce?'
                      }, {
                          x : Date.UTC(2011, 4, 9),
                          title : 'B',
                          text : 'EURUSD: Bearish Trend Change on Tap?'
                      }],
                      onSeries : 'dataseries',
                      shape : 'circlepin',
                      width : 16
                  }]
          });
      });

      /**
       * "_id" : ObjectId("524c2199f3b28b1529953e51"),
       "PX_LAST" : "35.91",
       "CUR_MKT_CAP" : "4.9704390625E10",
       "LONG_COMP_NAME" : "General Motors Co",
       "PARSEKYABLE_DES_SOURCE" : "GM US Equity",
       "RUSSELL_SECTOR_NAME" : "Consumer Discretionary",
       "ID_BB_GLOBAL" : "BBG000NDYB67",
       "ID_BB_UNIQUE" : "EQ0000000008690631",
       "ID_CUSIP 1" : "37045V100",
       "ticker" : "GM",
       "GICS_SECTOR_NAME" : "Consumer Discretionary",
       "ID_BB_COMPANY" : "16632863",
       "INDUSTRY_GROUP" : "Auto Manufacturers",
       "GICS_INDUSTRY_NAME" : "Automobiles",
       "GICS_SECTOR" : "25",
       "ID_CUSIP" : "37045V100",
       "ID_ISIN" : "US37045V1008"
       */

  </script>
    <script src="js/highstock.js"></script>
    <script src="js/exporting.js"></script>
    <script src="js/jquery.tmpl.js"></script>
    <script id="cInfoTemplate2" type="text/x-jquery-tmpl">
        <h2>{{html LONG_COMP_NAME}}</h2>
        <ul style="max-width: 320px;" class="nav nav-pills nav-stacked fnt-size-18 fnt-bold">
            <li>Current Price: <span style="color:green">{{html PX_LAST}}</span></li>
            <li>Market Cap: {{html mkt_cap1}} (Mil)</li>
            <li>Ticker: {{html ticker}}<span id="myCid" class="hide-me" cid="{{html ID_BB_GLOBAL}}" symbol="{{html ticker}}"></span></li>
            <li>Industry: {{html INDUSTRY_GROUP}} / {{html GICS_INDUSTRY_NAME}}</li>
            <li>Sector: {{html GICS_SECTOR_NAME}}</li>
            </li>
        </ul>
    </script>
    <script id="cnewsTemplate1" type="text/x-jquery-tmpl">

        <div class="media">
            <a href="#" class="pull-left">
                <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAEGElEQVR4nO2Z0aqrOhBAz/9/iiCFUCgilIKICFJKKUVEREREpPgLcx66260x7T4Pl7b7znpYL02Nw2Qlk5g/4zgK6OXPuwMABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABFAOAigHAZSDAMpBAOUggHIQQDkIoBwEUM7HCHDpKjmkkYRBIEEQSBBuJdmfpb382/N9ncvhcLhzPFdyURTfrxagOuzE87wHrCTJ2x/6qCW0n/Mj6ZTE96sF6PL4SXJv+HJoLg/7KJL18hkTS68gvt8twKWSwE7MeitpupOV9bu/Pbn7aI+L/3qeJ97qP0jwp8f32wXo8shKSiTtV9ul3v/DkjlItrGX1mWC+6aSoiilLK8UZTOrv0M7bS/u7a+KT60AeWRmycnq+TLatY3UdSVVVUnd9kuBzpPa7BsxvnuG5dFqMQPj4tZfI9sH9flV8SkVoJfYTJMeSt7UctqnEsexRFEs2TGX7tEu21qeo3M5n22zBDey9e1B3kk3jtLsgwf1/JXxKRUguSXYHhxrl506dtl5PJmdJpHLOHz350jwUGWLvoM4kY317k1aviU+fQIMpWye7qznpOXw/WxzEH+6NFeOGetI8GxQXJj4u46/IT5dAvS5GEci/XUo29B9bLoOTi/JevL/7fGrz34xw5abMkcpmMzkY/vu+JQLsEmLe3t7ts/fRs79KO1x+lFmI8W9Bi+X2MHx3qHKZrPzRrivPiI+PQKMnUSraQJDqWbtw2wmeZ4vWTUsduZmvRZjjBiz3OmvzEpMuLcSXTmX9rQaPiQ+NQJYNdEki5p42s2TFhe9FLFj+X2GtdSedw/2Af5Omg+IT5EAoxy30wQaOXXT9lZ2s3ptJO/dZ/qnTD7QDEXy9L8mzt8anzoBurP1pW0dSz1c24rMPp9vpLyMMrS1FEVhUUpZniScDogfyKkspay76/su1fJCxkE2KQUvjU+jAM5bMs+X1Wo5MOuk/KEva5NlkllttZdrz9tIObRWnbdLweviUyrAKP0Py/K1Ttr12cXynH1bWl03ekF23fX3jrZpKXhFfKoFGMdR2jx1nrk9zxMTZvcLmJ8SPNuV3zdt1vn7a8C++xwkC3zrvWvJh1fFhwD3gWiqQk6nkxyPBzkcT1I5LliI738rACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAggHoQQDkIoBwEUA4CKAcBlIMAykEA5SCAchBAOQigHARQDgIoBwGUgwDKQQDlIIBy/gLoHj+sVcRb9QAAAABJRU5ErkJggg==" alt="64x64" data-src="holder.js/64x64" class="media-object" style="width: 64px; height: 64px;">
            </a>
            <div class="media-body">
                <h4 class="media-heading"><span class="news-item">{{html HeadlineStr}}</span><!--<a href="#" keywords="aapl" class="news-item">{{html Headline}}</a>--></h4>

            </div>
        </div>


    </script>
    <script id="cInfoTemplate1" type="text/x-jquery-tmpl">
        <h2>Gilead Sciences Inc.</h2>
        <ul style="max-width: 320px;" class="nav nav-pills nav-stacked fnt-size-18 fnt-bold">
            <li>Current Price: <span style="color:green">62.8</span></li>
            <li>Market Cap: 220 Bil (USD)</li>

            <li>Ticker: GILD</li>
            <li>Industry: Biotechnology</li>
            <li>Sector: Health Care</li>
            </li>
        </ul>
    </script>
    <script id="cmtDisTmpl1" type="text/x-jquery-tmpl">
        <div class="col-xs-12 col-sm-3">
            <div style="float: right;">
                <p><span class="glyphicon glyphicon-user fnt-size-46"></span>  </p>
                <p><span class="">Jim Walsh</span> <span style="width: 10px;">&nbsp;&nbsp;|&nbsp;&nbsp;</span><span class="">Sector Analyst</span></p>

            </div>
            </p>
        </div>
        <div class="col-xs-12 col-sm-6">
            <div class="cmt-display">
                <span id="cmtSpanId">{{html cmt}}</span>
            </div>

        </div>
        <div class="col-xs-12 col-sm-3">
            <div class="bs-example">
                {{if prevSlideId}}
                <div class="btn-group padd-top-10px">
                    <button  type="button" class="btn btn-info slide-next" slideId="{{html prevSlideId}}" ty="prev">
                        <span class="glyphicon glyphicon-step-backward"></span> Prev
                    </button>
                </div>
                {{/if}}
                {{if nextSlideId}}
                <div class="btn-group padd-top-10px">
                    <button  type="button" class="btn btn-info slide-next" slideId="{{html nextSlideId}}" ty="next">
                        Next <span class="glyphicon glyphicon-step-forward"></span>
                    </button>
                </div>
                {{/if}}
                <div class="btn-group padd-top-10px">
                    <button  type="button" class="btn btn-success ppt-save">
                        <span class="glyphicon glyphicon-link"></span> Share
                    </button>
                </div>


            </div>
        </div>

    </script>

    <script id="cmtEditTmpl1" type="text/x-jquery-tmpl">
        <div class="col-xs-12 col-sm-3">
            <div style="float: right;">
                <p><span class="glyphicon glyphicon-user fnt-size-46"></span>  </p>
                <p><span class="">Jim Walsh</span> <span style="width: 10px;">&nbsp;&nbsp;|&nbsp;&nbsp;</span><span class="">Sector Analyst</span></p>

            </div>
            </p>
        </div>
        <div class="col-xs-12 col-sm-6">
            <textarea class="form-control" rows="5" placeholder="Enter Comments" id="myCmt"></textarea>

        </div>
        <div class="col-xs-12 col-sm-3">
            <div class="bs-example">
                <div class="btn-toolbar">
                    <div class="btn-group">
                        <button  type="button" class="btn btn-default add-update-slide" >
                            <span class="glyphicon glyphicon-check"></span> Add/Update Slide
                        </button>

                    </div><!-- /btn-group -->
                </div><!-- /btn-toolbar -->
                <div class="btn-group padd-top-10px">
                    <button  type="button" class="btn btn-info">
                        <span class="glyphicon glyphicon-step-backward"></span> Prev
                    </button>
                </div>
                <div class="btn-group padd-top-10px">
                    <button  type="button" class="btn btn-info">
                        Next <span class="glyphicon glyphicon-step-forward"></span>
                    </button>
                </div>
                <div class="btn-group padd-top-10px">
                    <button  type="button" class="btn btn-success ppt-save">
                        <span class="glyphicon glyphicon-link"></span> Share
                    </button>
                </div>
                <div class="btn-group padd-top-10px">
                    <button class="btn btn-primary " type="button">Save</button>
                    <button data-toggle="dropdown" class="btn btn-primary dropdown-toggle" type="button"><span class="caret"></span></button>
                    <ul role="menu" class="dropdown-menu">
                        <li><a href="#">
                            <span class="glyphicon glyphicon-save ppt-save"></span> Save
                        </a></li>
                        <li><a href="#">
                            <span class="glyphicon glyphicon-send ppt-save"></span> Email</a></li>
                        <li><a href="#">Something else here</a></li>
                        <li class="divider"></li>
                        <li><a href="#">Separated link</a></li>
                    </ul>
                </div>

            </div>
        </div>
    </script>
  <script type="text/javascript">


      function callSearchUsing(dataObj) {
          $.post('/1/company/search', { data:JSON.stringify(dataObj)}, function (response) {

              //$('.popover-content').empty();
              console.log(response.data);
              $('#cInfoDivId').empty();
              $("#cInfoTemplate2").tmpl(response.data).appendTo("div#cInfoDivId");
              console.log('dataObj.symbol ->'+dataObj.symbol);
              loadNewsFor(dataObj.symbol);
              //return response;

          });
      }

      function refreshResults(currSlide){
          var dataObj={};
          dataObj['q']=currSlide.cid;
          dataObj['symbol']=currSlide.symbol;
          dataObj['m']='true';
          callSearchUsing(dataObj);
          $('#commDivId').empty();
          $("#cmtDisTmpl1").tmpl(currSlide).appendTo("div#commDivId");
          $('#commDivId').removeClass('hide-me');
      }

      function loadNewsFor(symbol){
          //http://betawebapi.dowjones.com/fintech/articles/api/v1/source/424/?count=20
          var newsURLToCall = '/1/company/news/'+(symbol?symbol:'all');
          console.log('newsURL ->'+newsURLToCall);
          $.get(newsURLToCall,function (response) {
              //
              $('#news-ft-div').empty();
              $("#cnewsTemplate1").tmpl(response.Headlines).appendTo("div#news-ft-div");
              $('span.news-ticker').hover(function(e) {
                  //hideAllPopovers();
                  e.preventDefault();
                  var tickerSymbol = $(this).attr('n-ticker');
                  console.log(' hover -->'+tickerSymbol);
                  var e1=$(this);
                  var newsURLToCall1 = '/1/estimates/for/'+tickerSymbol;
                  $.get(newsURLToCall1,function(d) {
                      e1.popover({html : true,
                          live: true,
                          placement:'bottom',title:tickerSymbol,content: '<h1>Title ' +tickerSymbol+'</h1>'}).popover('show');
                  });
              },function(e) {
                  var e1=$(this);
                  e1.popover('hide');
              });

          });

      }


      $(document).ready(function () {


          loadNewsFor();
          //
          /*$.get('http://api.pearson.com/ftpress/book.json?name=apple&apikey=V4oQMVLlkCF9UuwCQaNpgnJPDs9zP0TG',function (response) {
              //
              $('#news-ft-div').empty();
              $("#cnewsTemplate1").tmpl(response.books).appendTo("div#news-ft-div");
              console.log(response);
          })*/
          $.urlParam = function(name){
              var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href);
              if(results){
                  return results[1] || 0;
              } else{
                  return undefined;
              }

          }

          console.log($.urlParam('q'));

          if($.urlParam('q') ){
              var dataObj={};
              dataObj['pid']=$.urlParam('q');
              /*$.post('/1/sb/addSlide', { data:JSON.stringify(dataObj),slideId:-1}, function (data) {
               console.log(data);
               });*/
              $.post('/1/sb/getPPT', { data:JSON.stringify(dataObj)}, function (response) {
                  console.log(response.data.currSlide.cid);
                  refreshResults(response.data.currSlide);
                  $('#myModal').modal('show');

                  //$('#myCmt').val(response.data.currSlide.cmt) ;
              });
              //callSearchUsing(dataObj);

          }else{
              $("#cInfoTemplate1").tmpl().appendTo("div#cInfoDivId");
          }



          $('body').on('click', function (e) {
              $('.popover-link').each(function () {
                  //the 'is' for buttons that trigger popups
                  //the 'has' for icons within a button that triggers a popup
                  if (!$(this).is(e.target) && $(this).has(e.target).length === 0 && $('.popover').has(e.target).length === 0) {
                      $(this).popover('hide');
                  }
              });


          });

          /**
           * '$('.search-res').click(function(){

           var cid = $(this).attr('cid');
           console.log(cid);


           });
           */
          $(document).on( 'click', '.search-res', function(){
              console.log('search called..!');
              var cid = $(this).attr('cid');
              var symbol = $(this).attr('symbol');
              console.log(cid);
              var dataObj={};
              dataObj['q']=cid;
              dataObj['m']='true';
              dataObj['symbol']=symbol;

              callSearchUsing(dataObj);
          } );

          $(document).on( 'click', '.slide-next', function(){
              var slideId = $(this).attr('slideId');
              var type = $(this).attr('type');
              //prev
              console.log('slideId ->'+slideId);
              var dataObj={};
              dataObj['slideId']=slideId;
              dataObj['type']=type;
              dataObj['m']='true';
              $.post('/1/sb/prevNext', { data:JSON.stringify(dataObj),slideId:-1}, function (response) {
                  refreshResults(response.data.currSlide);
              });
              //callSearchUsing(dataObj);
          } );
          $(document).on( 'click', '.ppt-save', function(){
              $.post('/1/sb/save',{},function(data){
                  alert('Presentation has been saved Successfully..!');
              })
          });

          $(document).on( 'click', '.add-update-slide', function(){
              //e.preventDefault();
              var dataObj = {};
              dataObj['cid']=$('#myCid').attr('cid');
              dataObj['symbol']=$('#myCid').attr('symbol');
              dataObj['cmt']=$('#myCmt').val();
              $.post('/1/sb/addSlide', { data:JSON.stringify(dataObj),slideId:-1}, function (data) {
                  alert('Slide has been saved Successfully..!');
              });
          });



          //slide-next




      });

      $('.pres-create').click(function (e) {
          e.preventDefault();
          $('#commDivId').empty();

          $("#cmtEditTmpl1").tmpl().appendTo("div#commDivId");

          $('#commDivId').removeClass('hide-me');
          $.post('/1/sb/clean',{},function(data){
              //alert('Presentation has been saved Successfully..!');
          })

      });

      $('#searchDivId').on('show.bs.popover', function () {
          // do something…
          console.log('before event is called');
          console.log(this);
      })




      $('#searchDivId').popover({
          html : true,
          placement:'bottom',
          content: function(obj) {
              /*console.log('pop-over object 11..!');
              console.log(callSearch());
              var dataObj = callSearch().responseJSON.data;
              //console.log(callSearch().reseponse);
              var resultHTML = '<ul>';
              $.each( dataObj, function( ) {
                  //console.log( this.ticker );
                  resultHTML+='<li><h3 class="cres-title"><a href="#" class="search-res" cid="' +this.ID_BB_GLOBAL+
                          '">' + this.LONG_COMP_NAME +
                          '</a></h3></li>';
              });

              resultHTML+=
                      '</ul>';
              console.log(resultHTML);*/
              return $('#popover-content-cinfo').html();
          }

      });

      function callSearch(){
          return $.get('/1/company/search', { q:$('#searchDivId').val()}, function (response) {

              //$('.popover-content').empty();
              console.log(resultHTML);
              return response;

          });
      }


      /*$('#searchDivId').on('keyup',function(){
          console.log('searchTerm ->'+$('#searchDivId').val());
          //$('.search-c').popover('hide');
          var e=$(this);
          //e.popover({content: '',placement:'bottom',html:true}).popover('hide');
          //e.unbind('click');
          $.get('/1/company/search', { q:$('#searchDivId').val()}, function (response) {
              var resultHTML = '<ul>';
              $.each( response.data, function( ) {
                  //console.log( this.ticker );
                  resultHTML+='<li><h3 class="cres-title"><a href="#" class="search-res" cid="' +this.ID_BB_GLOBAL+
                          '">' + this.LONG_COMP_NAME +
                          '</a></h3></li>';
              });

               resultHTML+=
                      '</ul>';
              //$('.popover-content').empty();
              console.log(resultHTML);
              e.popover({content: resultHTML,placement:'bottom',html:true}).popover('show');
              console.log('abc ->');
          });
      });*/


      /*$('.search-c').popover({trigger:'keypress',placement:'bottom',html:true,content:function(){
         // console.log($("#cResTemplate1").tmpl());
          //console.log('searchTerm ->'+$('#searchDivId').val());
          var searchResult = getSearchResult();
          console.log(searchResult);

          return  searchResult;

      }});

      function getSearchResult(){
          return $.get('/1/company/search', { q:$('#searchDivId').val()}, function (response) {
              //console.log(response.data) ;
              var resultHTML = '<ul>';
              $.each( response.data, function( ) {
                  //console.log( this.ticker );
                  resultHTML+='<li><h3 class="cres-title"><a href="#" class="search-res" cid="' +this.ID_BB_GLOBAL+
                          '">' + this.LONG_COMP_NAME +
                          '</a></h3></li>';
              });
              //console.log(resultHTML);
              return resultHTML +
                      '</ul>';
          });
      }*/

      $('.add-update-slide').click(function (e) {
          e.preventDefault();
          var dataObj = {};
          dataObj['cid']=$('#myCid').attr('cid');
          dataObj['symbol']=$('#myCid').attr('symbol');
          dataObj['cmt']=$('#myCmt').val();
          $.post('/1/sb/addSlide', { data:JSON.stringify(dataObj),slideId:-1}, function (data) {
             console.log(data);
          });
      });

      $('.ppt-save').click(function(e){
          $.post('/1/sb/save',{},function(data){
              alert('Presentation has been saved Successfully..!');
          })
      })

  </script>
    <script type="text/javascript">

        $(function(){



            /*var sym = $.url().param('symbol') || 'AAPL';
            var dur = $.url().param('duration') || 3650;

            new Markit.InteractiveChartApi(sym, dur);*/
        });

    </script>
  </body>
</html>
